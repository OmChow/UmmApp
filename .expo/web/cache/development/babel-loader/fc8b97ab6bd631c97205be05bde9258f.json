{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport React, { useState } from 'react';\nimport { containerFull, goback, hr80, logo1 } from \"../../CommonCss/pagecss\";\nimport logo from \"../../../assets/logo.png\";\nimport { formbtn, formHead, formHead2, formHead3, formInput, formTextLinkCenter, formTextLinkRight } from \"../../CommonCss/Formcss\";\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { firebase } from \"../../Firebase/Config\";\nimport * as ImagePicker from 'expo-image-picker';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar AddPost = function AddPost(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    postdescription = _useState2[0],\n    setpostdescription = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading1 = _useState4[0],\n    setLoading1 = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading2 = _useState6[0],\n    setLoading2 = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    post = _useState8[0],\n    setPost = _useState8[1];\n  var pickImage = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      setLoading1(true);\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [1, 1],\n        quality: 1\n      });\n      if (!result.cancelled) {\n        var source = {\n          uri: result.uri\n        };\n        var response = yield fetch(result.uri);\n        var blob = yield response.blob();\n        var filename = result.uri.substring(result.uri);\n        var ref = firebase.storage().ref().child(filename);\n        var snapshot = yield ref.put(blob);\n        var url = yield snapshot.ref.getDownloadURL();\n        setLoading1(false);\n        setPost(url);\n      } else {\n        setLoading1(false);\n        setPost(null);\n      }\n    });\n    return function pickImage() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleUpload = function handleUpload() {\n    if (post != null) {\n      AsyncStorage.getItem('user').then(function (data) {\n        setLoading2(true);\n        fetch('http://10.0.2.2:3000/addpost', {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: JSON.parse(data).user.email,\n            post: post,\n            postdescription: postdescription\n          })\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          if (data.message == 'Post added successfully') {\n            alert('Post added successfully');\n            setLoading2(false);\n            navigation.navigate('My_UserProfile');\n          } else {\n            alert('Something went wrong, please try again');\n            setLoading2(false);\n          }\n        });\n      });\n    } else {\n      alert('Please select an image');\n    }\n  };\n  return _jsxs(View, {\n    style: containerFull,\n    children: [_jsxs(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate('Settings_1');\n      },\n      style: goback,\n      children: [_jsx(MaterialIcons, {\n        name: \"arrow-back-ios\",\n        size: 24,\n        color: \"white\"\n      }), _jsx(Text, {\n        style: {\n          color: 'white',\n          fontSize: 16\n        },\n        children: \"Go Back\"\n      })]\n    }), _jsx(Image, {\n      source: logo,\n      style: logo1\n    }), loading1 ? _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"white\"\n    }) : _jsxs(_Fragment, {\n      children: [_jsx(Text, {\n        style: formHead2,\n        children: \"Add New Post\"\n      }), post ? _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return pickImage();\n        },\n        children: _jsx(Image, {\n          source: {\n            uri: post\n          },\n          style: {\n            width: 200,\n            height: 200,\n            marginVertical: 10\n          }\n        })\n      }) : _jsx(Text, {\n        style: styles.addpost,\n        onPress: function onPress() {\n          pickImage();\n        },\n        children: \"Click here to select a new post\"\n      })]\n    }), _jsx(Text, {\n      style: formHead2,\n      children: \"Change Description\"\n    }), _jsx(TextInput, {\n      placeholder: \"Enter new description\",\n      style: formInput,\n      onChangeText: function onChangeText(text) {\n        return setpostdescription(text);\n      },\n      multiline: true,\n      numberOfLines: 1\n    }), loading2 ? _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"white\"\n    }) : _jsx(Text, {\n      style: formbtn,\n      onPress: function onPress() {\n        return handleUpload();\n      },\n      children: \"Upload\"\n    })]\n  });\n};\nexport default AddPost;\nvar styles = StyleSheet.create({\n  addpost: {\n    fontSize: 20,\n    fontWeight: '100',\n    color: 'white',\n    borderColor: 'white',\n    borderWidth: 1,\n    borderRadius: 10,\n    paddingVertical: 50,\n    width: '80%',\n    textAlign: 'center',\n    marginVertical: 20\n  }\n});","map":{"version":3,"names":["React","useState","containerFull","goback","hr80","logo1","logo","formbtn","formHead","formHead2","formHead3","formInput","formTextLinkCenter","formTextLinkRight","MaterialIcons","firebase","ImagePicker","AsyncStorage","AddPost","navigation","postdescription","setpostdescription","loading1","setLoading1","loading2","setLoading2","post","setPost","pickImage","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","cancelled","source","uri","response","fetch","blob","filename","substring","ref","storage","child","snapshot","put","url","getDownloadURL","handleUpload","getItem","then","data","method","headers","body","JSON","stringify","email","parse","user","res","json","message","alert","navigate","color","fontSize","width","height","marginVertical","styles","addpost","text","StyleSheet","create","fontWeight","borderColor","borderWidth","borderRadius","paddingVertical","textAlign"],"sources":["/Users/supriyomal/Desktop/Umm/App/SRC/Screens/Mainpage/AddPost.js"],"sourcesContent":["import { StyleSheet, Text, View, Image, TextInput, TouchableOpacity, ActivityIndicator } from 'react-native'\nimport React, { useState } from 'react'\nimport { containerFull, goback, hr80, logo1 } from '../../CommonCss/pagecss'\nimport logo from '../../../assets/logo.png'\nimport { formbtn, formHead, formHead2, formHead3, formInput, formTextLinkCenter, formTextLinkRight } from '../../CommonCss/Formcss'\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { firebase } from '../../Firebase/Config'\nimport * as ImagePicker from 'expo-image-picker';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst AddPost = ({ navigation }) => {\n\n    const [postdescription, setpostdescription] = useState('')\n\n    const [loading1, setLoading1] = useState(false)\n    const [loading2, setLoading2] = useState(false)\n    const [post, setPost] = useState('')\n\n    const pickImage = async () => {\n        setLoading1(true)\n        let result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.Images,\n            allowsEditing: true,\n            aspect: [1, 1],\n            quality: 1,\n        })\n        // console.log(result)\n\n\n        if (!result.cancelled) {\n            const source = { uri: result.uri };\n\n\n            const response = await fetch(result.uri);\n            const blob = await response.blob();\n            const filename = result.uri.substring(result.uri);\n\n            const ref = firebase.storage().ref().child(filename);\n            const snapshot = await ref.put(blob);\n            const url = await snapshot.ref.getDownloadURL();\n\n            setLoading1(false)\n            setPost(url)\n            // console.log(url)\n        }\n        else {\n            setLoading1(false)\n            setPost(null)\n        }\n    }\n\n    const handleUpload = () => {\n\n        if (post != null) {\n            AsyncStorage.getItem('user')\n                .then(data => {\n                    setLoading2(true)\n\n                    fetch('http://10.0.2.2:3000/addpost', {\n                        method: 'post',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            email: JSON.parse(data).user.email,\n                            post: post,\n                            postdescription: postdescription\n                        })\n                    })\n                        .then(res => res.json())\n                        .then(data => {\n                            if (data.message == 'Post added successfully') {\n                                alert('Post added successfully')\n                                setLoading2(false)\n                                navigation.navigate('My_UserProfile')\n                            }\n                            else {\n                                alert('Something went wrong, please try again')\n                                setLoading2(false)\n                            }\n                        })\n                })\n        }\n        else {\n            alert('Please select an image')\n        }\n    }\n\n    return (\n        <View style={containerFull}>\n            <TouchableOpacity onPress={() => navigation.navigate('Settings_1')} style={goback}>\n\n                <MaterialIcons name=\"arrow-back-ios\" size={24} color=\"white\" />\n                <Text style={{\n                    color: 'white',\n                    fontSize: 16,\n                }}\n\n                >Go Back</Text>\n\n            </TouchableOpacity>\n\n            <Image source={logo} style={logo1} />\n            {\n                loading1 ? <ActivityIndicator\n                    size=\"large\"\n                    color=\"white\"\n                /> :\n                    <>\n                        <Text\n                            style={formHead2}\n                        >Add New Post</Text>\n\n                        {\n                            post ?\n                                <TouchableOpacity\n                                    onPress={() => pickImage()}\n                                >\n                                    <Image source={{ uri: post }} style={{\n                                        width: 200, height: 200,\n                                        marginVertical: 10,\n                                    }} />\n                                </TouchableOpacity>\n                                :\n\n                                <Text style={styles.addpost}\n                                    onPress={() => {\n                                        pickImage()\n                                    }}\n                                >\n                                    Click here to select a new post\n                                </Text>\n                        }\n                    </>\n            }\n\n\n\n            {/*  */}\n            <Text style={formHead2}>Change Description</Text>\n            <TextInput placeholder=\"Enter new description\" style={formInput}\n                onChangeText={(text) => setpostdescription(text)}\n                multiline={true}\n                numberOfLines={1}\n            />\n\n            {\n                loading2 ? <ActivityIndicator\n                    size=\"large\"\n                    color=\"white\"\n                /> :\n                    <Text style={formbtn}\n                        onPress={() => handleUpload()}\n                    >\n                        Upload\n                    </Text>\n            }\n        </View>\n    )\n}\n\n\n\n\n\n\nexport default AddPost\n\nconst styles = StyleSheet.create({\n    addpost: {\n        fontSize: 20,\n        fontWeight: '100',\n        color: 'white',\n\n        borderColor: 'white',\n        borderWidth: 1,\n        borderRadius: 10,\n        paddingVertical: 50,\n        width: '80%',\n        textAlign: 'center',\n        marginVertical: 20,\n    }\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}