{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport React, { useState } from 'react';\nimport { containerFull, goback, hr80, logo1 } from \"../../CommonCss/pagecss\";\nimport logo from \"../../../assets/logo.png\";\nimport { formbtn, formHead, formHead2, formHead3, formInput, formTextLinkCenter, formTextLinkRight } from \"../../CommonCss/formcss\";\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { firebase } from \"../../Firebase/Config\";\nimport * as ImagePicker from 'expo-image-picker';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar UploadProfilePicture = function UploadProfilePicture(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    image = _useState2[0],\n    setImage = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var pickImage = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [1, 1],\n        quality: 1\n      });\n      if (!result.cancelled) {\n        var source = {\n          uri: result.uri\n        };\n        setImage(source);\n        var response = yield fetch(result.uri);\n        var blob = yield response.blob();\n        var filename = result.uri.substring(result.uri);\n        var ref = firebase.storage().ref().child(filename);\n        var snapshot = yield ref.put(blob);\n        var url = yield snapshot.ref.getDownloadURL();\n        return url;\n      } else {\n        return null;\n      }\n    });\n    return function pickImage() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleUpload = function handleUpload() {\n    AsyncStorage.getItem('user').then(function (data) {\n      setLoading(true);\n      pickImage().then(function (url) {\n        fetch('http://10.0.2.2:3000/setprofilepic', {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: JSON.parse(data).user.email,\n            profilepic: url\n          })\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          if (data.message === \"Profile picture updated successfully\") {\n            setLoading(false);\n            alert('Profile picture updated successfully');\n            navigation.navigate('Settings_1');\n          } else if (data.error === \"Invalid Credentials\") {\n            alert('Invalid Credentials');\n            setLoading(false);\n            navigation.navigate('Login');\n          } else {\n            setLoading(false);\n            alert(\"Please Try Again\");\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      });\n    });\n  };\n  return _jsxs(View, {\n    style: containerFull,\n    children: [_jsxs(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate('Settings_1');\n      },\n      style: goback,\n      children: [_jsx(MaterialIcons, {\n        name: \"arrow-back-ios\",\n        size: 24,\n        color: \"gray\"\n      }), _jsx(Text, {\n        style: {\n          color: 'gray',\n          fontSize: 16\n        },\n        children: \"Go Back\"\n      })]\n    }), _jsx(Image, {\n      source: logo,\n      style: logo1\n    }), _jsx(Text, {\n      style: formHead2,\n      children: \"Choose a profile profile\"\n    }), loading ? _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"white\"\n    }) : _jsx(Text, {\n      style: formbtn,\n      onPress: function onPress() {\n        return handleUpload();\n      },\n      children: \"Upload\"\n    })]\n  });\n};\nexport default UploadProfilePicture;\nvar styles = StyleSheet.create({});","map":{"version":3,"names":["React","useState","containerFull","goback","hr80","logo1","logo","formbtn","formHead","formHead2","formHead3","formInput","formTextLinkCenter","formTextLinkRight","MaterialIcons","firebase","ImagePicker","AsyncStorage","UploadProfilePicture","navigation","image","setImage","loading","setLoading","pickImage","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","cancelled","source","uri","response","fetch","blob","filename","substring","ref","storage","child","snapshot","put","url","getDownloadURL","handleUpload","getItem","then","data","method","headers","body","JSON","stringify","email","parse","user","profilepic","res","json","message","alert","navigate","error","catch","err","console","log","color","fontSize","styles","StyleSheet","create"],"sources":["/Users/supriyomal/Desktop/Untitled/SRC/Screens/Settings/UploadProfilePicture.js"],"sourcesContent":["import { StyleSheet, Text, View, Image, TextInput, TouchableOpacity, ActivityIndicator} from 'react-native'\nimport React, { useState } from 'react'\nimport { containerFull, goback, hr80, logo1 } from '../../CommonCss/pagecss'\nimport logo from '../../../assets/logo.png'\nimport { formbtn, formHead, formHead2, formHead3, formInput, formTextLinkCenter, formTextLinkRight } from '../../CommonCss/formcss'\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { firebase } from '../../Firebase/Config'\nimport * as ImagePicker from 'expo-image-picker';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nconst UploadProfilePicture = ({ navigation }) => {\n\n    const [image, setImage] = useState(null);\n\n    const [loading, setLoading] = useState(false)\n\n    const pickImage = async () => {\n        let result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.Images,\n            allowsEditing: true,\n            aspect: [1, 1],\n            quality: 1,\n        })\n        // console.log(result)\n\n\n        if (!result.cancelled) {\n            const source = { uri: result.uri };\n            setImage(source);\n\n            const response = await fetch(result.uri);\n            const blob = await response.blob();\n            const filename = result.uri.substring(result.uri);\n\n            const ref = firebase.storage().ref().child(filename);\n            const snapshot = await ref.put(blob);\n            const url = await snapshot.ref.getDownloadURL();\n\n            // console.log(url)\n            return url\n        }\n        else {\n            return null\n        }\n    }\n\n    const handleUpload = () => {\n        // pickImage()\n        AsyncStorage.getItem('user')\n            .then(data => {\n                setLoading(true)\n\n                pickImage().then(url => {\n                    fetch('http://10.0.2.2:3000/setprofilepic', {\n                        method: 'post',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            email: JSON.parse(data).user.email,\n                            profilepic: url\n                        })\n                    })\n                        .then(res => res.json()).then(\n                            data => {\n                                if (data.message === \"Profile picture updated successfully\") {\n                                    setLoading(false)\n                                    alert('Profile picture updated successfully')\n                                    navigation.navigate('Settings_1')\n                                }\n                                else if (data.error === \"Invalid Credentials\") {\n                                    alert('Invalid Credentials')\n                                    setLoading(false)\n                                    navigation.navigate('Login')\n                                }\n                                else {\n                                    setLoading(false)\n                                    alert(\"Please Try Again\");\n                                }\n                            }\n                        )\n                        .catch(err => {\n                            console.log(err)\n                        })\n\n                })\n            })\n    }\n    return (\n        <View style={containerFull}>\n            <TouchableOpacity onPress={() => navigation.navigate('Settings_1')} style={goback}>\n\n                <MaterialIcons name=\"arrow-back-ios\" size={24} color=\"gray\" />\n                <Text style={{\n                    color: 'gray',\n                    fontSize: 16,\n                }}\n\n                >Go Back</Text>\n\n            </TouchableOpacity>\n\n            <Image source={logo} style={logo1} />\n            <Text style={formHead2}>Choose a profile profile</Text>\n\n\n            {\n                loading ? <ActivityIndicator\n                    size=\"large\"\n                    color=\"white\"\n                /> :\n                    <Text style={formbtn}\n                        onPress={() => handleUpload()}\n                    >\n                        Upload\n                    </Text>\n            }\n        </View>\n    )\n}\n\n\n\n\n\nexport default UploadProfilePicture\n\nconst styles = StyleSheet.create({})"],"mappings":"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"},"metadata":{},"sourceType":"module"}